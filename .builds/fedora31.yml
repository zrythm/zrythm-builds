#
# Copyright (C) 2020 Alexandros Theodotou <alex at zrythm dot org>
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published
# by the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.
#

image: fedora/31
packages:
  - cmake
  - gcc-c++
  - gcc
  - pkgconfig
  - python3
  - libchromaprint-devel
  - lilv-devel
  - lv2-devel
  - libsndfile-devel
  - libyaml-devel
  - librsvg2-devel
  - libsamplerate-devel
  - libzstd-devel
  - gettext
  - guile22-devel
  - gtk2-devel
  - gtk3-devel
  - gtksourceview3-devel
  - graphviz-devel
  - suil-devel
  - help2man
  - alsa-lib-devel
  - ladspa-devel
  - fftw-devel
  - help2man
  - rpm-build
  - portaudio-devel
  - rtaudio-devel
  - jack-audio-connection-kit-devel
  - libX11-devel
  - rubberband-devel
  - qt5-devel
  - SDL2-devel
  - xdg-utils
  - rsync
  - tar
  - wget
  - vim
sources:
  - https://git.sr.ht/~alextee/zrythm
  - https://git.sr.ht/~alextee/zrythm-installer
  - https://github.com/mesonbuild/meson
secrets:
  - 063cb70d-6da6-492a-b530-04edc07651ba
  - a97e7a27-0c61-4e64-b103-fdd2af6cfbda
tasks:
  - make: |
      pip3 install --user meson
      export PATH=$PATH:/home/build/.local/bin && zrythm-builds/scripts/make-pkg.sh fedora31
  - deploy: |
      zrythm-builds/scripts/push-pkg.sh fedora31
